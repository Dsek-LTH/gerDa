<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File Upload with Multer in Node.js</title>
</head>
<body>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file" />

        <select name="dropdown">
            <option value="VTM">VTM</option>
            <option value="VTM-extra">VTM-extra</option>
            <option value="HTM1">HTM1</option>
            <option value="HTM-val">HTM-val</option>
            <option value="HTM2">HTM2</option>
        </select>
        Namn:
        <input type="text" name="name" />

        <input type="submit" value="Upload" />
    
    </form>
    <a href="/output/output.pdf" download="output.pdf">
        <button>Download File</button>
      </a>

      <textarea id="input" rows="10" cols="50"></textarea>
  <div id="preview"></div>

  <script>
    const meeting = "VTM";
    const title = "Min fina motion skrr pow"
    const body = "Jag vill att vi ska göra så här"
    const signMessage = "För att jag är bäst, dag som ovan"
    const authors = [{
        name: 'Ludvig Svedberg',
        position: 'Sexmästare'
    }, {
        name: 'Alfred Grip'
    }]
    const clauses = [{
        title: 'säga att Ludvig är bäst',
        descritpion: 'för det är han'
    }, {
        title: 'säga att Alfred är bäst'
    }]
    const urlSearchParams = new URLSearchParams();
    urlSearchParams.append('meeting', meeting);
    urlSearchParams.append('title', title);
    urlSearchParams.append('body', body);
    urlSearchParams.append('signMessage', signMessage);
    authors.forEach(author => urlSearchParams.append('authors', JSON.stringify(author)));
    clauses.forEach(clause => urlSearchParams.append('clauses', JSON.stringify(clause)));
    const params = urlSearchParams.toString();
    const url = `http://localhost:3000/generate?${params}`;
    window.location = url;
  </script>

</body>
</html>